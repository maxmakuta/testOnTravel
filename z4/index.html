<!DOCTYPE html> 
<html> 
<head> 
    <title>iframe source</title> 
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script> 
    <script type="text/javascript"> 
     $(function() { 
     var ck = document.cookie; 
     var expDate = new Date(); 
     expDate.setFullYear(expDate.getFullYear() + 20) 
     $("#auditlog").append("iframe loaded<br/>"); 
     if (ck) { 
      $("#auditlog").append("cookie exists<br/>"); 
     } else { 
      $("#auditlog").append("cookie not set<br/>"); 
     } 

     // Assign handler to message event 
     if (window.addEventListener) { 
      window.addEventListener('message', messageHandler, false); 
     } else if (window.attachEvent) { // ie8 
      window.attachEvent('onmessage', messageHandler); 
     } 
     }) 

     function messageHandler(e) { 
     var msg = {}; 
     var response; 
     // Check origin 
     if (e.origin === 'http://siteA' || e.origin === 'http://siteB') { 
      // Retrieve data sent in postMessage 
      msg = JSON.parse(e.data); 
      if (msg.action == "getCookie") { 
       response = getCookie(); 
      } else if (msg.action == "setCookie") { 
       setCookie(msg.payload); 
       response = "cookie set"; 
      } else { 
       response = "action not supported"; 
      } 
      // Send reply to source of message 
      e.source.postMessage(response, e.origin); 
     } 
     } 

     function setCookie(cookieVal) { 
     var expDate = new Date(); 
     expDate.setFullYear(expDate.getFullYear() + 20) 
     document.cookie = cookieVal + "; expires=" + expDate.toUTCString(); 
     } 

     function getCookie() { 
     return document.cookie; 
     } 
    </script> 
</head> 
<body> 
    <div id="auditlog"></div> 
    <div id="cookieinfo"></div> 
</body> 
</html> 